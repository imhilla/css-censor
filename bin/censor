#!/usr/bin/env ruby
require_relative '../lib/censor.rb'
require 'colorize'

puts '---------------------------------'
puts '| Welcome to Censor CSS Linter! |'
puts '---------------------------------'
puts ''
puts 'Reading file...'
puts ''
file = ARGV[0]
puts 'Scanning file for possible errors...'
puts ''

errors = []
lines = File.open(file).to_a

if lines.size.positive?
  check = Censor.new
  check.last_line_check(lines, errors)
  check.indentation_check(lines, errors)
  check.trailing_space_check(lines, errors)
  check.space_before_bracket_check(lines, errors)
  check.missing_semicolon_check(lines, errors)
end

if errors.size.positive?
  puts "Checks completed with the following #{errors.size} errors: "
  errors.each { |error| puts '  Error: '.red + "#{error}\n" }
else
  puts 'Checks completed with no errors'.green
end
